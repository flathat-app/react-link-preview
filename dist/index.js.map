{"version":3,"file":"index.js","sources":["../src/components/LinkPreview.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport styles from './LinkPreview.css'\n\nconst isValidUrl = (url) => {\n  const regex = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/\n  const validUrl = regex.test(url)\n  return validUrl\n}\n\nfunction LinkPreview(props) {\n  const [loading, setLoading] = useState(true)\n  const [preview, setPreviewData] = useState({})\n  const [isUrlValid, setUrlValidation] = useState(false)\n\n  const {\n    url,\n    width,\n    maxWidth,\n    marginTop,\n    marginBottom,\n    marginRight,\n    marginLeft,\n    onClick,\n    render\n  } = props\n\n  const api = 'https://lpdg.herokuapp.com/parse/link'\n\n  const style = {\n    width,\n    maxWidth,\n    marginTop,\n    marginBottom,\n    marginRight,\n    marginLeft\n  }\n\n  useEffect(() => {\n    async function fetchData() {\n      const fetch = window.fetch\n      if (isValidUrl(url)) {\n        setUrlValidation(true)\n      } else {\n        return {}\n      }\n      setLoading(true)\n      const response = await fetch(api, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ url })\n      })\n      const data = await response.json()\n      setPreviewData(data)\n      setLoading(false)\n    }\n    fetchData()\n  }, [url])\n\n  if (!isUrlValid) {\n    console.error(\n      'LinkPreview Error: You need to provide url in props to render the component'\n    )\n    return null\n  }\n\n  // If the user wants to use its own element structure with the fetched data\n  if (render) {\n    return render({\n      loading: loading,\n      preview: preview\n    })\n  } else if (loading) {\n    return (\n      <div>\n        <div className={styles['link-preview-section']} style={style}>\n          <div className={styles['link-description']}>\n            <div className={styles.domain}>\n              <span\n                className={\n                  (styles['link-url-loader'], styles['animated-background'])\n                }\n              >\n                facebook.com\n              </span>\n            </div>\n            <div className={styles['link-data-loader']}>\n              <div className={(styles.p1, styles['animated-background'])}>\n                Shashank Shekhar\n              </div>\n              <div className={(styles.p2, styles['animated-background'])}>\n                This is some description\n              </div>\n            </div>\n          </div>\n          <div className={styles['link-image-loader']}>\n            <div className={styles.img} />\n          </div>\n        </div>\n      </div>\n    )\n  } else {\n    return (\n      <div>\n        <div\n          className={styles['link-preview-section']}\n          style={style}\n          onClick={onClick}\n        >\n          <div className={styles['link-description']}>\n            <div className={styles.domain}>\n              <span className={styles['link-url']}>{preview.domain}</span>\n            </div>\n            <div className={styles['link-data']}>\n              <div className={styles['link-title']}>{preview.title}</div>\n              <div className={styles['link-description']}>\n                {preview.description}\n              </div>\n            </div>\n          </div>\n          <div className={styles['link-image']}>\n            {preview.img && <img src={preview.img} alt={preview.description} />}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nLinkPreview.defaultProps = {\n  onClick: () => {},\n  width: '90%',\n  maxWidth: '700px',\n  marginTop: '18px',\n  marginBottom: '18px',\n  marginRight: 'auto',\n  marginLeft: 'auto'\n}\n\nexport default LinkPreview\n"],"names":["isValidUrl","url","regex","validUrl","test","LinkPreview","props","useState","loading","setLoading","preview","setPreviewData","isUrlValid","setUrlValidation","width","maxWidth","marginTop","marginBottom","marginRight","marginLeft","onClick","render","api","style","useEffect","fetchData","fetch","window","method","headers","Accept","body","JSON","stringify","response","json","data","console","error","React","styles","domain","img","title","description","defaultProps"],"mappings":"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"}